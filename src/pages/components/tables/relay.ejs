<%
let relayWSConnectionFields = [

  ['ip'               , '30' , ''               , 'disabled  show text-center              '],
  ['reqcount'         , '30' , ''               , 'disabled  show text-center              '],
  ['banned'           , ''   , 'formatCheckbox' , 'disabled  hide                          '],
  ['domainId'         , ''   , ''               , 'disabled  hide text-center              '],
  ['domain'           , ''   , ''               , 'disabled  show text-center              '],
  ['comments'         , ''   , ''               , 'disabled  show mobile-hide              '],
];

%>

<% if (locals.activeModules.some(mod => mod.name === 'relay')) { %>
  <%- include('../table', {
    tableName:"Relay Connections", 
    tableDesc:"",
    tableId:"relayWSConnectionsData", 
    buttons:[
      ['add','hide'],
      ['disable','show'],
      ['enable','show'],
      ['visible','hide'],
      ['invisible','hide'],
      ['admin','hide'],
      ['edit','show'],
      ['password','hide'],
      ['remove','show'],
      ['pay', 'hide'],
      ['balance','hide'],
      ['moderate','hide'],
      ['ban','show']
    ],
    fields: relayWSConnectionFields,
    datakey: 'relay.connections',
    objectName: 'connection',
    }); %> 

<% } %>

<%
let eventsFields = [
  ['active'           , '30' , 'formatCheckbox' , 'disabled   show text-center             '],
  ['checked'          , '30' , 'formatCheckbox' , 'enabled   show text-center              '],
  ['banned'           , ''   , 'formatCheckbox' , 'disabled  hide                          '],
  ['kind'             , ''   , ''               , 'disabled  show text-center              '],
  ['tags'             , ''   , ''               , 'disabled  hide mobile-hide              '],
  ['event_id'         , '64' , ''               , 'disabled  show text-center              '],
  ['pubkey'           , ''   , ''               , 'disabled  hide mobile-hide              '],
  ['content'          , ''   , ''               , 'disabled  hide mobile-hide              '],
  ['created_at'       , ''   , 'formatTimestamp', 'disabled  show text-center              '],
  ['received_at'      , ''   , 'formatTimestamp', 'disabled  show text-center              '],
];
%>
<% if(locals.activeModules.some(mod => mod.name === 'relay')) { %>
  <%- include('../table', {
    tableName:"Events", 
    tableDesc:"",
    tableId:"eventsData", 
    buttons:[
      ['add','hide'],
      ['disable','show'],
      ['enable','show'],
      ['visible','hide'],
      ['invisible','hide'],
      ['admin','hide'],
      ['edit','show'],
      ['password','hide'],
      ['remove','show'],
      ['pay', 'hide'],
      ['balance','hide'],
      ['moderate','hide'],
      ['ban','show']
    ],
    fields: eventsFields,
    datakey: 'relay',
    objectName: 'event',
    }); %> 
  <%- include('../charts/combined', {
      chartId: 'relayData',
      datakey: 'relay',
      doughnutField: 'active',
      doughnutName: 'event',
      action: 'count',
      monthField: 'created_at',
      monthName: 'Relay events',
    }); %>

<% } %>